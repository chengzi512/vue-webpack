
worker_processes  4;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    
    upstream server.account.com{  
    server 10.11.0.29:80 weight=10;  
    server 10.11.0.28:80 weight=5;  
    }  
    server {
        	listen 80;
        	server_name server.account.com;
        	location / {
            		root   /home/www;
			# try_files $uri $uri/ /index.html;
            		index  index.html index.htm;
			proxy_redirect off;
        	}
		location /apiPath {
			proxy_pass http://server.account.com/;
			proxy_cookie_path / /;
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header Host $host;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        	}
    }
}
